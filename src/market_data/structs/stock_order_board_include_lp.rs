#![allow(dead_code)]

use crate::market_data::traits::market_snapshot::MktSnapshot;
use crate::market_data::traits::parser::NumberParser;
use crate::market_data::traits::parser::StockTickerParser;
use chrono::prelude::{DateTime, Local};

#[derive(Debug)]
pub struct StockOrderBoardIncludeLp {
    pub ts: DateTime<Local>,
    pub ticker: String,
    pub toq: u32,
    pub ask1: f64,
    pub ask2: f64,
    pub ask3: f64,
    pub ask4: f64,
    pub ask5: f64,
    pub ask6: f64,
    pub ask7: f64,
    pub ask8: f64,
    pub ask9: f64,
    pub ask10: f64,
    pub bid1: f64,
    pub bid2: f64,
    pub bid3: f64,
    pub bid4: f64,
    pub bid5: f64,
    pub bid6: f64,
    pub bid7: f64,
    pub bid8: f64,
    pub bid9: f64,
    pub bid10: f64,
    pub askq1: u32,
    pub askq2: u32,
    pub askq3: u32,
    pub askq4: u32,
    pub askq5: u32,
    pub askq6: u32,
    pub askq7: u32,
    pub askq8: u32,
    pub askq9: u32,
    pub askq10: u32,
    pub lp_askq1: u32,
    pub lp_askq2: u32,
    pub lp_askq3: u32,
    pub lp_askq4: u32,
    pub lp_askq5: u32,
    pub lp_askq6: u32,
    pub lp_askq7: u32,
    pub lp_askq8: u32,
    pub lp_askq9: u32,
    pub lp_askq10: u32,
    pub bidq1: u32,
    pub bidq2: u32,
    pub bidq3: u32,
    pub bidq4: u32,
    pub bidq5: u32,
    pub bidq6: u32,
    pub bidq7: u32,
    pub bidq8: u32,
    pub bidq9: u32,
    pub bidq10: u32,
    pub lp_bidq1: u32,
    pub lp_bidq2: u32,
    pub lp_bidq3: u32,
    pub lp_bidq4: u32,
    pub lp_bidq5: u32,
    pub lp_bidq6: u32,
    pub lp_bidq7: u32,
    pub lp_bidq8: u32,
    pub lp_bidq9: u32,
    pub lp_bidq10: u32,
}

impl StockOrderBoardIncludeLp {
    pub fn new(
        ts: DateTime<Local>,
        ticker: String,
        toq: u32,
        ask1: f64,
        ask2: f64,
        ask3: f64,
        ask4: f64,
        ask5: f64,
        ask6: f64,
        ask7: f64,
        ask8: f64,
        ask9: f64,
        ask10: f64,
        bid1: f64,
        bid2: f64,
        bid3: f64,
        bid4: f64,
        bid5: f64,
        bid6: f64,
        bid7: f64,
        bid8: f64,
        bid9: f64,
        bid10: f64,
        askq1: u32,
        askq2: u32,
        askq3: u32,
        askq4: u32,
        askq5: u32,
        askq6: u32,
        askq7: u32,
        askq8: u32,
        askq9: u32,
        askq10: u32,
        lp_askq1: u32,
        lp_askq2: u32,
        lp_askq3: u32,
        lp_askq4: u32,
        lp_askq5: u32,
        lp_askq6: u32,
        lp_askq7: u32,
        lp_askq8: u32,
        lp_askq9: u32,
        lp_askq10: u32,
        bidq1: u32,
        bidq2: u32,
        bidq3: u32,
        bidq4: u32,
        bidq5: u32,
        bidq6: u32,
        bidq7: u32,
        bidq8: u32,
        bidq9: u32,
        bidq10: u32,
        lp_bidq1: u32,
        lp_bidq2: u32,
        lp_bidq3: u32,
        lp_bidq4: u32,
        lp_bidq5: u32,
        lp_bidq6: u32,
        lp_bidq7: u32,
        lp_bidq8: u32,
        lp_bidq9: u32,
        lp_bidq10: u32,
    ) -> Self {
        Self {
            ts,
            ticker,
            toq,
            ask1,
            ask2,
            ask3,
            ask4,
            ask5,
            ask6,
            ask7,
            ask8,
            ask9,
            ask10,
            bid1,
            bid2,
            bid3,
            bid4,
            bid5,
            bid6,
            bid7,
            bid8,
            bid9,
            bid10,
            askq1,
            askq2,
            askq3,
            askq4,
            askq5,
            askq6,
            askq7,
            askq8,
            askq9,
            askq10,
            lp_askq1,
            lp_askq2,
            lp_askq3,
            lp_askq4,
            lp_askq5,
            lp_askq6,
            lp_askq7,
            lp_askq8,
            lp_askq9,
            lp_askq10,
            bidq1,
            bidq2,
            bidq3,
            bidq4,
            bidq5,
            bidq6,
            bidq7,
            bidq8,
            bidq9,
            bidq10,
            lp_bidq1,
            lp_bidq2,
            lp_bidq3,
            lp_bidq4,
            lp_bidq5,
            lp_bidq6,
            lp_bidq7,
            lp_bidq8,
            lp_bidq9,
            lp_bidq10,
        }
    }

    pub fn parse(packet: &[u8]) -> Self {
        Self {
            ts: Local::now(),
            ticker: unsafe { Self::parse_ticker(packet, 8, 14) },
            toq: Self::parse_qty(packet, 22, 34),
            ask1: Self::parse_price(packet, 34, 43),
            bid1: Self::parse_price(packet, 43, 52),
            askq1: Self::parse_qty(packet, 52, 64),
            bidq1: Self::parse_qty(packet, 64, 76),
            lp_askq1: Self::parse_qty(packet, 76, 88),
            lp_bidq1: Self::parse_qty(packet, 88, 100),
            ask2: Self::parse_price(packet, 100, 109),
            bid2: Self::parse_price(packet, 109, 118),
            askq2: Self::parse_qty(packet, 118, 130),
            bidq2: Self::parse_qty(packet, 130, 142),
            lp_askq2: Self::parse_qty(packet, 142, 154),
            lp_bidq2: Self::parse_qty(packet, 154, 166),
            ask3: Self::parse_price(packet, 166, 175),
            bid3: Self::parse_price(packet, 175, 184),
            askq3: Self::parse_qty(packet, 184, 196),
            bidq3: Self::parse_qty(packet, 196, 208),
            lp_askq3: Self::parse_qty(packet, 208, 220),
            lp_bidq3: Self::parse_qty(packet, 220, 232),
            ask4: Self::parse_price(packet, 232, 241),
            bid4: Self::parse_price(packet, 241, 250),
            askq4: Self::parse_qty(packet, 250, 262),
            bidq4: Self::parse_qty(packet, 262, 274),
            lp_askq4: Self::parse_qty(packet, 274, 286),
            lp_bidq4: Self::parse_qty(packet, 286, 298),
            ask5: Self::parse_price(packet, 298, 307),
            bid5: Self::parse_price(packet, 307, 316),
            askq5: Self::parse_qty(packet, 316, 328),
            bidq5: Self::parse_qty(packet, 328, 340),
            lp_askq5: Self::parse_qty(packet, 340, 352),
            lp_bidq5: Self::parse_qty(packet, 352, 364),
            ask6: Self::parse_price(packet, 364, 373),
            bid6: Self::parse_price(packet, 373, 382),
            askq6: Self::parse_qty(packet, 382, 394),
            bidq6: Self::parse_qty(packet, 394, 406),
            lp_askq6: Self::parse_qty(packet, 406, 418),
            lp_bidq6: Self::parse_qty(packet, 418, 430),
            ask7: Self::parse_price(packet, 430, 439),
            bid7: Self::parse_price(packet, 439, 448),
            askq7: Self::parse_qty(packet, 448, 460),
            bidq7: Self::parse_qty(packet, 460, 472),
            lp_askq7: Self::parse_qty(packet, 472, 484),
            lp_bidq7: Self::parse_qty(packet, 484, 496),
            ask8: Self::parse_price(packet, 496, 505),
            bid8: Self::parse_price(packet, 505, 514),
            askq8: Self::parse_qty(packet, 514, 526),
            bidq8: Self::parse_qty(packet, 526, 538),
            lp_askq8: Self::parse_qty(packet, 538, 550),
            lp_bidq8: Self::parse_qty(packet, 550, 562),
            ask9: Self::parse_price(packet, 562, 571),
            bid9: Self::parse_price(packet, 571, 580),
            askq9: Self::parse_qty(packet, 580, 592),
            bidq9: Self::parse_qty(packet, 592, 604),
            lp_askq9: Self::parse_qty(packet, 604, 616),
            lp_bidq9: Self::parse_qty(packet, 616, 628),
            ask10: Self::parse_price(packet, 628, 637),
            bid10: Self::parse_price(packet, 637, 646),
            askq10: Self::parse_qty(packet, 646, 658),
            bidq10: Self::parse_qty(packet, 658, 670),
            lp_askq10: Self::parse_qty(packet, 670, 682),
            lp_bidq10: Self::parse_qty(packet, 682, 694),
        }
    }
}

impl StockTickerParser for StockOrderBoardIncludeLp {}
impl NumberParser for StockOrderBoardIncludeLp {}

impl MktSnapshot for StockOrderBoardIncludeLp {
    fn ts(&self) -> DateTime<Local> {
        self.ts
    }
    fn ticker(&self) -> &str {
        self.ticker.as_ref()
    }
    fn ask(&self) -> f64 {
        self.ask1
    }
    fn bid(&self) -> f64 {
        self.bid1
    }
    fn askq(&self) -> u32 {
        self.askq1
    }
    fn bidq(&self) -> u32 {
        self.bidq1
    }
}
